"use strict";var _createClass=function(){function i(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(n,e,t){return e&&i(n.prototype,e),t&&i(n,t),n}}();function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var manuhLocal=require("manuh"),debug=require("debug")("debug"),info=require("debug")("manuhClient"),_ManuhClient=function(){function e(n){_classCallCheck(this,e),this.manuh=n,this.topics=[],this.connected=!1,this.clientId="manuh2mqtt_"+Math.random().toString(16).substr(2,8),this.id=0}return _createClass(e,[{key:"connect",value:function(){info("==> Connecting to manuh"),this.connected=!0}},{key:"publish",value:function(n,e){0!=this.connected&&(info("Publish message "+n+" '"+e+"'"),this.manuh.publish(n.toString(),e.toString(),{retained:!1}))}},{key:"subscribedFunctions",value:function(n,e){info("Message "+this.id+" '"+this+"'",n);var t={topic:this,message:n};manuhLocal.publish("__message/manuh/mqtt",t,{retained:!0})}},{key:"subscribe",value:function(n){this.topics.push(n),this.connected&&(info("Subscribed '"+n+"'"),this.manuh.subscribe(n,this.clientId,this.subscribedFunctions.bind(n)))}}]),e}();exports._ManuhClient=_ManuhClient;